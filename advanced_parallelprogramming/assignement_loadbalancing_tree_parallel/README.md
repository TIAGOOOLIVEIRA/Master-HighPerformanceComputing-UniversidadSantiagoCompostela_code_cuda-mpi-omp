# Parallelizing findValidMax function in a unbalanced tree



The file http://gac.udc.es/~basilio/ppa_project.cpp contains a sequential program that  
1) generates an unbalanced tree by means of the function generateTree, 
2) finds the maximum value stored in the tree that meets a number of conditions provided by a vector of functions and the path to reach it, which is performed by function findValidMax, and 
3) tests the correctness of the path by means of function getPathVal  Implement a shared memory parallelization of function findValidMax that is based on C++11, oneTBB or a combination of both. The implementation of a load balacing strategy in the code will be particularly valued, given the degree of unbalance of the tree. The implementation should not be based on the concrete properties of the tree or the particular functions used in the example; rather it should be totally generic and suitable for any tree based on nodes of the type Node_t used in the program as well as for any vector of conditions. As a result, it its not valid to use in the implementation statistics gathered from an analysis of the tree. It is not valid either to make any change in the list of condition functions.  The tree generated by the example program requires several Gigabytes of main memory. Thus it is adviseable to execute it reserving 32GB for example; which can be made in the Finisterrae 3 by means of the command compute -c 1 --mem 32.
 You must provide: - Your parallel application. It should receive the number of parallel threads to use by means of the environment variable OMP_NUM_THREADS; as if it had been written using OpenMP. You must only parallelize findValidMax, but you can add new functions, types and/or global variables. - A short explanation of the code / parallelization strategy in English (max 2 pages)
 Please provide both files in a single tar or zip file by the deadline set.

## Profiling 

## References
    3. Flow Graphs _ Pro TBB_ C++ Parallel Programming with Threading Building Blocks.pdf
        Future work: redesign the tree as a Flow:graph
    4. TBB and the Parallel Algorithms of the C++ Standard Template Library _ Pro TBB_ C++ Parallel Programming with Threading Building Blocks.pdf
        Vectorization SIMD + Threads 
    “Vector and Wavefront Policies,” Programming LanguageC++ (WG21), P0076r3, 
        http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0076r3.pdf , July 7, 2016        
    7. Scalable Memory Allocation _ Pro TBB_ C++ Parallel Programming with Threading Building Blocks.pdf
        Compilation Considerations
    8. Mapping Parallel Patterns to TBB _ Pro TBB_ C++ Parallel Programming with Threading Building Blocks.pdf
        Flof-graph: event based coordination    
    9. The Pillars of Composability _ Pro TBB_ C++ Parallel Programming with Threading Building Blocks.pdf

    15. Cancellation and Exception Handling _ Pro TBB_ C++ Parallel Programming with Threading Building Blocks.pdf
        Advanced Task Cancellation
            tg.cancel_group_execution();
    16. Tuning TBB Algorithms_ Granularity, Locality, Parallelism, and Determinism _ Pro TBB_ C++ Parallel Programming with Threading Building Blocks.pdf
        cache affinity
    18. Beef Up Flow Graphs with Async Nodes _ Pro TBB_ C++ Parallel Programming with Threading Building Blocks.pdf
        Async World Example
    20. TBB on NUMA Architectures _ Pro TBB_ C++ Parallel Programming with Threading Building Blocks.pdf
        likwid-bench -t stream -i 1 -w S0:12GB:16-0:S0,1:S0,2:S0
        Mastering Data Placement and Processor Affinity
    1 Jumping Right In_ Hello TBB _ Pro TBB_ C++ Parallel Programming with Threading Building Blocks.pdf
    c_c-data-structures-and-algorithms-in-c.pdf
        13.2.2 The Adjacency List Structure
    C++_Concurrency_in_Action_Second_Editio.pdf
        Waiting for an event or other condition
            mutex vs Future if check global variable?

    O'Reilly Intel Threading Building Blocks OutFitting C++ for Multi-Core Processor Parallelism.pdf
    Functional_Programming_in_C++.epub
        “1.4.2	Concurrency and synchronization”
        Parallel versions of standard algorithms  
        HPX parallel STL
        http://mng.bz/EBys
        http://mng.bz/8435
